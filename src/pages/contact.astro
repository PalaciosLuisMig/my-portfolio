---
import Layout from "@layouts/Layout.astro";
import { Icon } from "astro-icon/components";

import { MYEMAIL } from "../config";

---
<Layout title="Experiencia" urlMenuItem="/contact">

    <div class="flex justify-center flex-col px-5 items-center">
        <div class="max-w-screen-lg w-full">
            
            <!-- Contact -->
            <section >
            
                <h1 class="prose dark:prose-invert text-xl md:text-2xl lg:text-3xl font-bold text-primary my-10 flex flex-row items-center " >
                    <Icon name="contact" class="mr-2" /> Contáctame
                </h1>

                <h2 class="flex items-center mb-6 text-lg md:text-xl lg:text-2xl font-semibold ">
                    Correo electrónico
                </h2>

                <div class="flex flex-wrap gap-4 justify-between mb-10">
                    <label id="lblEmail" class="input input-primary input-bordered flex items-center gap-2 w-full md:w-[60%]">
                        <Icon name="email" size={20} />
                        {MYEMAIL}
                    </label>
                    <div class="flex w-full md:w-[37%] gap-4 justify-between">
                        <div class="w-1/2">
                        <a href={`mailto:${MYEMAIL}`} class="btn btn-primary w-full">
                            <Icon name="send" class="inline-block ml-2" />
                            Enviar
                        </a>
                        </div>
                        <div class="w-1/2">
                        <button id="btnEmailCopy" class="btn btn-primary w-full">
                            <Icon name="copy" class="inline-block ml-2" />
                            Copiar
                        </button>
                        </div>
                        <div id="altEmailCopy" class="toast toast-center hidden">
                        <div class="alert alert-info bg-accent">
                            <span>Copiado</span>
                            <Icon name="copy" class="inline-block ml-2" />
                        </div>
                        </div>
                    </div>
                </div>
                
                <h2 class="flex items-center mb-6 text-lg md:text-xl lg:text-2xl font-semibold">
                    Redes sociales
                </h2>
                <div
                    class="flex flex-row gap-12 justify-start mb-12">
                    <a class="hover:text-primary" href="https://www.linkedin.com/in/palaciosluismig/" target="_blank">
                        <Icon name="social_networks/linkedin" size={30} />
                    </a>
                    <a  class="hover:text-primary" href="https://github.com/palaciosluismig" target="_blank">
                        <Icon name="social_networks/github" size={30} />
                    </a>
                    <a class="hover:text-primary" href="https://www.instagram.com/palaciosluismig/" target="_blank">
                        <Icon name="social_networks/instagram" size={30} />
                    </a>
                    
                </div>
                <div class="md:hidden">
                    <button id="btn-download-contact" class="btn mb-12 px-2.5 text-lg btn-accent hover:scale-105 w-full">
                        <Icon name="download" />Descargar CV
                    </button>
                </div>

            </section>
    </div>
  </div>
</Layout >
<script>
  document.addEventListener('astro:page-load', () => {
    const toastEmailCopy = document.getElementById("altEmailCopy");
    
    function emailCopy(text:string) {
        const labelEmail = document.getElementById(text);
        if (labelEmail){

        const textEmail = labelEmail?.innerText || labelEmail?.textContent || ""
        navigator.clipboard.writeText(textEmail);
        toastEmailCopy?.classList.remove("hidden");
        setTimeout(()=> {
            toastEmailCopy?.classList.add("hidden");
        },2000);
        }
    }

    const btnEmailCopy = document.querySelector("#btnEmailCopy");

    if (btnEmailCopy){
        btnEmailCopy.addEventListener("click", () => {emailCopy("lblEmail")});
    }
    })

    const btnDownload =  document.getElementById("btn-download-contact");
    
    if (btnDownload){
      btnDownload.addEventListener("click", function() {
        const url = "/cv/CV-Luis-Miguel-Palacios.pdf";
        var link = document.createElement("a");
        link.href = url;
        link.setAttribute("download", "CV-Luis-Miguel-Palacios.pdf");
        link.click();
    });
    }
</script>